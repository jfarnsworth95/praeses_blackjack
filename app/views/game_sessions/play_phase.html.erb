<%= render partial: "shared/nav", locals: {title: "Play"} %>
<%= render "info_screen" %>

<div class='basic_wrapper_single'>
    <div>
    <h3><%= @current_player.name %>'s Turn</h3>
    <% if @current_player.is_split %>
        <h3>Your first hand is currently at <%= @current_player.best_value %></h3>
        <h3>Your second hand is currently at <%= @current_player.best_value(true) %></h3>
        <% if @game_session.on_player_split %>
            <h4>You are currently on your second hand</h4>
        <% else %>
            <h4>You are currently on your first hand</h4>
        <% end %>
    <% else %>
        <h3>Your hand is currently at <%= @current_player.best_value %></h3>
    <% end %>
    </div>
</div>

<div class='actions_wrapper'>

    <div class='casino_btn_wrapper'>
        <div class='casino_btn_inner_wrapper'>
            <%= button_to "Stand", {controller: "game_sessions", action: "play", request: GameSessionsController::REQUEST_STAND, on_split: @game_session.on_player_split }, class: "casino_btn", method: :post %>
        </div>
    </div>
    <% if not @current_player.has_bust?(@game_session.on_player_split) %>
        <div class='casino_btn_wrapper'>
            <div class='casino_btn_inner_wrapper'>
                <%= button_to "Hit", {controller: "game_sessions", action: "play", request: GameSessionsController::REQUEST_HIT, on_split: @game_session.on_player_split }, class: "casino_btn", method: :post %>
            </div>
        </div>
    <% end %>
    <% if @current_player.can_double_down? %>
        <div class='casino_btn_wrapper'>
            <div class='casino_btn_inner_wrapper'>
                <%= button_to "DD", {controller: "game_sessions", action: "play", request: GameSessionsController::REQUEST_DOUBLE_DOWN }, class: "casino_btn", method: :post %>
            </div>
        </div>
    <% end %>
    <% if @current_player.can_split? %>
        <div class='casino_btn_wrapper'>
            <div class='casino_btn_inner_wrapper'>
                <%= button_to "Split", {controller: "game_sessions", action: "play", request: GameSessionsController::REQUEST_SPLIT }, class: "casino_btn", method: :post %>
            </div>
        </div>
    <% end %>
    <% if @current_player.can_double_down_and_split? %>
        <div class='casino_btn_wrapper'>
            <div class='casino_btn_inner_wrapper'>
                <%= button_to "DD-S", {controller: "game_sessions", action: "play", request: GameSessionsController::REQUEST_DOUBLE_DOWN_AND_SPLIT }, class: "casino_btn", method: :post %>
            </div>
        </div>
    <% end %>
</div>

<% if flash[:play_error] %>
<br/>
<div id='flash_wrapper' class='basic_wrapper_single'>
    <h2><%= flash[:play_error] %></h2><br />
</div>
<% end %>
